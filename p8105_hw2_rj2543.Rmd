---
title: "p8105_hw2_rj2543"
author: "rj2543"
date: "October 1, 2018"
output: github_document
---

```{r set up, include = FALSE}
library(tidyverse)
```


# problem 1

This problem focuses on NYC Transit data; in particular, this CSV file contains information related to each entrance and exit for each subway station in NYC.

Read and clean the data; retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance. Convert the entry variable from character (YES vs NO) to a logical variable (the ifelse or recode function may be useful).

```{r data import}
nycsubway = read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") #relative path instead of absolute path
nycsubway = janitor::clean_names(nycsubway) #clean up variable names

nycsubway
skimr::skim(nycsubway)
```

```{r data clean}
nyc_subway = 
  select(nycsubway, line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>%  #select required variables
  mutate(entry = (entry == "YES")) #convert entry variable from character to logical, yes = TRUE

nyc_subway
str(nyc_subway)
```


Write a short paragraph about this dataset â€“ explain briefly what variables the dataset contains, describe your data cleaning steps so far, and give the dimension (rows x columns) of the resulting dataset. Are these data tidy?

**The nyc_subway dataset is derived from the original imported data which comes from "NYC_Transit_Subway_Entrance_And_Exit_Data.csv". This dataset contains `r names(nyc_subway)` variables. The data cleaning steps are: 1) First import the data via the relative path instead of the absolute path in order to make code reproducible. 2) Second clean up variable names for future referrence. 3) Third select variables that are addressed in the problem requirement. 4) Fourth convert the entry variable from the original character structure to the logical structure ("YES" refers to "TRUE" while "NO" refers to "FALSE"). The resulting dataset has `r nrow(nyc_subway)` rows and `r ncol(nyc_subway)` columns. These data are not tidy enough since route1 to route11 variables,line and station_name are somehow redundant.**

Answer the following questions using these data:

* How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St A/B/C/D; 125st 1; 125st 4/5); the distinct function may be useful here.

```{r dinstint stations}
distinct(nyc_subway, line, station_name) %>% 
  nrow()
```

* How many stations are ADA compliant?

```{r ADA compliant}
filter(nyc_subway, ada == TRUE) %>% 
  nrow()
```


* What proportion of station entrances / exits without vending allow entrance?

```{r proportion without vending}
entry1 = filter(nycsubway, entry == "YES") #station entrances
entry2 = filter(entry1, vending == "NO") #entrances without vending
p1 = nrow(entry2)/nrow(entry1) #proportion of entrances without vending
p1 

exit1 = filter(nycsubway, exit_only == "Yes") #station exits
exit2 = filter(exit1, vending == "NO") #exits without vending
p2 = nrow(exit2)/nrow(exit1) #proportion of exits without vending
p2
```


Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?

```{r reformat}
distinct(nyc_subway, line, station_name) 
```

